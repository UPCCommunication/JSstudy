<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <title>两点之间画直线</title>
    <style type="text/css">
        body{
            font-size:12px;
        }
    </style>
</head>

<body>
<canvas id="myCanvas" width="600" height="500" style="border:1px solid #c3c3c3;">
    Your browser does not support the canvas element.
</canvas>
<button type="button" onclick="duandian()">断点连线</button>
<button type="button" onclick="lianxu()">连续连线</button>
<script type="text/javascript">
    <!--
    var dhbd=0;
    function duandian()
    {dhbd=0;dot.splice(0,4);}
    function lianxu()
    {dhbd=1;dot.splice(0,4);}
    var dot=new Array();
    document.onmousedown =function (a)//mouseDown() 函数当鼠标按钮在段落上被按下时触发；mouseUp() 函数在鼠标按钮被释放时触发
    {
        //若div存在，则删除
        if(document.getElementById('line_div')){
            var clearDiv=document.getElementById("line_div");
            clearDiv.parentNode.removeChild(clearDiv);
        }
        //按下时创建一个事件
        if(!a) a=window.event;
        //获取x轴、y轴坐标
        var x;
        var y;

        //当数组长度大于等于4时，清空数组
        if(dhbd==0){if(dot.length>=4) dot.splice(0,4);}
        if(dhbd==1){if(dot.length>=4) {dot[0]=dot[2];
       dot[1]=dot[3];dot.splice(2,2);};}
        //将x、y添加到数组中,数组中保存了两组坐标值，相当于页面上的A(x1,y1)、B(x2,y2)两点
        if (a.clientX<=600&&a.clientY<=500) {x=a.clientX; y=a.clientY; dot.push(x,y);}//防止点到画布以外；
        //当数组长度为4时，画线。
        if(dot.length==4){
            //计算div的长和宽
            var c=document.getElementById("myCanvas");
            var cxt=c.getContext("2d");
            cxt.moveTo(dot[0],dot[1]);
            cxt.lineTo(dot[2],dot[3]);
           // cxt.lineTo(10,70);
            cxt.stroke();
        }
    }
    -->
</script>
</body>
</html>
